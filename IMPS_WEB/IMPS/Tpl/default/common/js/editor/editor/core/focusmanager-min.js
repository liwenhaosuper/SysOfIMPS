KISSY.Editor.add("focusmanager",function(e){function i(){var a=this;a.iframeFocus=l;h=a;c&&clearTimeout(c);c=setTimeout(function(){a.fire("focus")},100)}function j(){var a=this;a.iframeFocus=m;h=n;c&&clearTimeout(c);c=setTimeout(function(){a.fire("blur")},100)}var f=KISSY,k=f.DOM,g=f.Event,d={},c,h;f={refreshAll:function(){for(var a in d){var b=d[a];b.document.designMode="off";b.document.designMode="on"}},currentInstance:function(){return h},getInstance:function(a){return d[a]},add:function(a){var b=
k._4e_getWin(a.document);g.on(b,"focus",i,a);g.on(b,"blur",j,a)},register:function(a){d[a._UUID]=a},remove:function(a){delete d[a._UUID];var b=k._4e_getWin(a.document);g.remove(b,"focus",i,a);g.remove(b,"blur",j,a)}};var l=true,m=false,n=null;e.focusManager=f;e.focusManager=f;e.getInstances=function(){return d};e.getInstances=e.getInstances});
